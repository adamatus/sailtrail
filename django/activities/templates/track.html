{% extends 'base.html' %}
{% load js %}

{% block title_text %}{{ track.activity_id.details.name }}{% endblock %}

{% block extra_styles %}
{% css 'activities/css/plots.css' %}
{% css 'seiyria-bootstrap-slider/dist/css/bootstrap-slider.min.css' %}
<style>
  .slider.slider-horizontal {
		width: 100%;
	}
</style>
{% endblock %}

{% load static %}
{% block main_section %}
		<h1><a href="../..">{{ track.activity_id.details.name }}</a></h1>
		<button type="button" class="btn btn-default" data-toggle="modal" data-target="#delete_modal" id="activity_delete_button">Delete</button>
		{% url "delete_track" track.activity_id.id track.id as delete_url %}
		{% include 'components/delete-modal.html' with action=delete_url %}
		<div class="row">
			<div class="col-md-6" style="padding-top: 1em;">
				<div id="map"></div>
				<input id="time-slider" data-slider-id="time-slider-Slider" type="text">
			</div>
			<div class="col-md-6" style="padding-top: 1em;">
				<div id="speed-plot"></div>
				{% if trimmed %}
				<a href="{% url 'untrim_track' activity.id track.id %}" class="btn btn-default">Untrim</a>
				{% else %}
				<button class="btn btn-default" id="trim-start">Trim Start</button>
				<button class="btn btn-default" id="trim-end">Trim End</button>
				<form role="form" action="{% url 'trim_track' activity.id track.id %}" method="POST">


					<input type="hidden" id="input-trim-start" name="trim-start" value='-1'>
					<input type="hidden" id="input-trim-end" name="trim-end" value='-1'>
					{% csrf_token %}
					<button type="submit" class='btn btn-default' id='trim-end'>Trim Activity</button>
				</form>
				{% endif %}
			</div>
		</div>
{% endblock %}

{% block extra_bottom_js %}
	{% js 'activities/activity_viewer.bundle.js' %}
		<script>
var max_speed = +"{{ activity.stats.max_speed }}".split(' ')[0],
		units = {{ units|safe }},
		json_url = "{% url 'activity_json' activity.id %}";

activity_viewer.init(json_url, max_speed, units);
		</script>
{% endblock %}
