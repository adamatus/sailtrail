{% extends 'base.html' %}

{% block title_text %}Home{% endblock %}

{% block main_section %}
{% load unit_conversions %}
			<h1>SailStats</h1>
			<p>The best place to track your windsports activites</p>
		  <h2>Activity List</h2>
				<hr>
				{% for activity in activities %}
				<div class='activity'>
					<h3><a href="/activities/{{ activity.id }}/">{{ activity.name }}</a></h3>
					<p>Sailed by <a href="{% url "user" activity.user.username %}">{{ activity.user.username }}</a> {% if activity.private %}<i>Private</i>{% endif %}</p>
					<ul class="list-inline">
						<li class="activity-date">{{ activity.date }}</li>
						<li class="activity-time">{{ activity.start_time }}</li>
						<li class="activity-max-speed">{{ activity.model_max_speed|speed }}</li>
						<li class="activity-category">{{ activity.get_category_display }}</li>
					</ul>
				</div>
				<hr>
				{% endfor %}
        <h2>Leaderboards</h2>
        {% for category in leaders %}
        <h3>{{ category.category }}</h3>
        <table class='table table-striped'>
          <tr><th>User</th><th>Max Speed</th></tr>
          {% for leader in category.leaders %}
          <tr><td><a href="{% url "user" leader.user__username %}">{{ leader.user__username }}</a></td><td>{{ leader.max_speed|speed }}</td></tr>
          {% endfor %}
        </table>
        {% endfor %}
				{% url "upload" as upload_url %}
				{% include 'components/upload-modal.html' with header="Upload new activity" action=upload_url %}
				<button id="upload-file-modal-btn" class="btn btn-default" data-toggle="modal" data-target="#upload-modal">Upload New Activity</button>
			</form>
{% endblock %}
{% block extra_bottom_js %}
	{% include 'components/upload-validation.html' %}
{% endblock %}
